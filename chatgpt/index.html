<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <title>ChatGPT - AI</title>
    <link rel="shortcut icon" href="th.png">
    <link rel="stylesheet" href="a.css">
    <link rel="stylesheet" href="b.css">
    <meta charset="utf-8" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
</head>

<body data-theme="orange">
    <div class="app">
        <div class="wrapper">
            <div class="chat-area">
                <div class="chat-area-main" id="chat-body">
                    <div class="chat-msg">
                        <div class="chat-msg-profile">
                            <img class="chat-msg-img" src="g.png" alt="">
                            <div class="chat-msg-date">
                                本消息由Marsz编辑
                            </div>
                        </div>
                        <div class="chat-msg-content">
                            <br>
                            <div class="chat-msg-text">
                                这里是免费ChatGPT聊天室,
                                <br>
                                发送之后请等待回复.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chat-area-footer">
                    <input type="text" id="message" class="chat_message_up" placeholder="想与ChatGPT聊些什么..尝试回车">
                    <button class="detail-button" id="send-button">
                        <span class="d-none d-md-inline-block me-2">回车</span>
                        <i class="zmdi zmdi-mail-send"></i>
                    </button>
                </div>
            </div>

        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
document.onkeydown = function (e) {
            if (!e) e = window.event;
            if ((e.keyCode || e.which) == 13) {
                document.getElementById("send-button").click();
            }
}
$(document).ready(function () {

            var chatBody = $('#chat-body');
            var messageInput = $('#message');
            var sendButton = $('#send-button');
            sendButton.click(function () {
                var message = messageInput.val();
                if (message.trim() !== '') {
                    appendMessage('You', message);
                    $('.chat-area').animate({
                        scrollTop: $('.chat-area')[0].scrollHeight
                    },
                        1000);

                    $.ajax({
                        url: 'https://v1.apigpt.cn/chatgpt/',
                        type: 'POST',
                        data: {
                            message: message
                        },
                        success: function (response) {
                            appendMessage('ChatGPT', response);
                            $('.chat-area').animate({
                                scrollTop: $('.chat-area')[0].scrollHeight
                            },
                                1000);

                        }
                    });
                    messageInput.val('');
                }
            });

            function appendMessage(from, message) {
                var messageElement = $('<div class="chat-msg" id="chatai"></div>');
                var messagePend = $('<div class="chat-msg-profile"></div>')
                var messageContentElement = $('<div class="chat-msg-text"></div>');

                if (from === 'You') {
                    messageElement.addClass('owner');
                    var avatarElement = $('<img class="chat-msg-img" src="w.png" alt=""><div class="chat-msg-date">我</div>');
                } else {
                    var avatarElement = $('<img class="chat-msg-img" src="ai.png" alt="">');
                    var tipsElement = $('<div class="chat-msg-date">本消息由OpenAI·ChatGPT提供</div>');
                }

                messageContentElement.html(message);
                messagePend.append(avatarElement);
                messagePend.append(tipsElement);
                messageElement.append(messagePend);
                messageElement.append(messageContentElement);
                chatBody.append(messageElement);
                chatBody.scrollTop(chatBody[0].scrollHeight);
            }
});
    </script>
</body>
</html>

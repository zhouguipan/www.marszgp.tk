<html lang="zh-cn">

<head>
    <meta name="360-analysis-id" content="2x1c2x2p2w392s-xiarou">
    <meta charset="utf-8">
    <title>APIGPT - FreeChatGPT</title>
    <link rel="stylesheet" href="https://img.api.aa1.cn/2023/02/12/fc4bbacb8bfdd.css">
    <link rel="stylesheet" href="https://img.api.aa1.cn/2023/02/12/d08c5e4dac7af.css">
    <meta charset="utf-8" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
</head>

<body data-theme="orange">
    <div class="app">
        <div class="wrapper">
            <div class="chat-area">
                <div class="chat-area-main" id="chat-body">
                    <div class="chat-msg">
                        <div class="chat-msg-profile">
                            <img class="chat-msg-img" src="https://img.api.aa1.cn/2023/02/12/127eadca4ab03.svg" alt="">
                            <div class="chat-msg-date">
                                本消息由 API·GPT 官方公告编辑
                            </div>
                        </div>
                        <div class="chat-msg-content">
                            <br>
                            <div class="chat-msg-text">
                                这里是免费ChatGPT聊天室.
                            </div>
                            <div class="chat-msg-text">
                              如果您只想体验与ChatGPT聊天，与ChatGPT连接通信，只需要在下面想聊的内容即可；
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chat-area-footer">
                    <input type="text" id="message" class="chat_message_up" placeholder="想与ChatGPT聊些什么..尝试回车">
                    <button class="detail-button" id="send-button">
                            <span class="d-none d-md-inline-block me-2">
                                回车
                            </span>
                            <i class="zmdi zmdi-mail-send">
                            </i>
                        </button>
                </div>
            </div>
            
        </div>
    </div>
    <!-- JS Start -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js">
    </script>
    <script>
        document.onkeydown = function(e) {
            if (!e) e = window.event;
            if ((e.keyCode || e.which) == 13) {
                document.getElementById("send-button").click();
            }
        }
        $(document).ready(function() {

            var chatBody = $('#chat-body');
            var messageInput = $('#message');
            var sendButton = $('#send-button');
            sendButton.click(function() {
                var message = messageInput.val();
                if (message.trim() !== '') {
                    appendMessage('You', message);
                    $('.chat-area').animate({
                            scrollTop: $('.chat-area')[0].scrollHeight
                        },
                        1000);

                    $.ajax({
                        url: 'https://v1.apigpt.cn/chatgpt/',
                        type: 'POST',
                        data: {
                            message: message
                        },
                        success: function(response) {
                            appendMessage('ChatGPT', response);
                            $('.chat-area').animate({
                                    scrollTop: $('.chat-area')[0].scrollHeight
                                },
                                1000);
                        }
                    });
                    messageInput.val('');
                }
            });
            
            function appendMessage(from, message) {
                var messageElement = $('<div class="chat-msg" id="chatai"></div>');
                var messagePend = $('<div class="chat-msg-profile"></div>')
                    // var avatarElement = $('');
                var messageContentElement = $('<div class="chat-msg-text"></div>');

                if (from === 'You') {
                    messageElement.addClass('owner');
                    var avatarElement = $('<img class="chat-msg-img" src="https://img.api.aa1.cn/2023/02/12/043fbdaf8c1b8.svg" alt=""><div class="chat-msg-date">我</div>');
                    // var avatarElement = $('<div class="chat-msg-date">2023-02-12 00:00:01</div>');
                } else { // robot
                    var avatarElement = $('<img class="chat-msg-img" src="https://img.api.aa1.cn/2023/02/12/59c6fee6f7e66.png" alt="">');
                    var tipsElement = $('<div class="chat-msg-date">本消息由OpenAI·ChatGPT提供</div>');
                }

                // avatarElement.text(from[0]);
                messageContentElement.html(message);
                messagePend.append(avatarElement);
                messagePend.append(tipsElement);
                messageElement.append(messagePend);
                messageElement.append(messageContentElement);
                chatBody.append(messageElement);
                chatBody.scrollTop(chatBody[0].scrollHeight);
            }
        });
    </script>
</body>
</html>
